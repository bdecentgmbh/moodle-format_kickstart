{"version":3,"file":"formatkickstart.min.js","sources":["../src/formatkickstart.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Defines Kicstart javascript.\r\n * @module   format_kickstart/formatkickstart\r\n * @category  Classes - autoloading\r\n * @copyright 2021, bdecent gmbh bdecent.de\r\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n define(['jquery', 'core/str', 'core/notification', 'core/config', 'core/ajax', 'core/fragment', 'core/templates', 'core/modal_events', 'core/modal_factory', 'core/toast'],\r\n function($, str, notification, Config, Ajax, Fragment, Templates, ModalEvents, ModalFactory, Toast) {\r\n\r\n    /**\r\n     * Controls kicstart javascript.\r\n     * @param {int} contextid\r\n     * @param {int} courseid\r\n     * @param {int} menuid\r\n     * @return {void}\r\n    */\r\n    var Formatkickstart = function(contextid, courseid, menuid, filteroptions) {\r\n        var self = this;\r\n        var useTemplate = document.querySelectorAll(\".templates-block .use-template\");\r\n        self.contextId = contextid;\r\n        self.courseId = courseid;\r\n        self.menuid = menuid;\r\n        if (useTemplate) {\r\n            useTemplate.forEach((element) => {\r\n                element.addEventListener('click', self.templateHandler.bind(this));\r\n            });\r\n        }\r\n\r\n        if (filteroptions) {\r\n\r\n            var templateview = document.querySelectorAll(\".kickstart-page .listing-view-block a\");\r\n            if (templateview) {\r\n                templateview.forEach((element) => {\r\n                    element.addEventListener('click', self.templateviewHandler.bind(this));\r\n                });\r\n            }\r\n\r\n\r\n            var templatesearch = document.querySelectorAll(\".kickstart-page #search-template\");\r\n            if (templatesearch) {\r\n                templatesearch.forEach((element) => {\r\n                    element.addEventListener('change', self.templateSearchHandler.bind(this));\r\n                });\r\n            }\r\n\r\n            var librarycourse = document.querySelectorAll(\".librarycourse-filter-item .filter-item\");\r\n            if (librarycourse) {\r\n                librarycourse.forEach((element) => {\r\n                    element.addEventListener('change', self.libraryCourseHandler.bind(this));\r\n                });\r\n            }\r\n\r\n            var librarysort = document.querySelectorAll(\".kickstart-courselibrary-sort.sort-options a\");\r\n            if (librarysort) {\r\n                librarysort.forEach((element) => {\r\n                    element.addEventListener('click', (e) => {\r\n                        // Remove active class from all sort links\r\n                        librarysort.forEach(link => link.classList.remove('sort-active'));\r\n                        // Add active class to clicked element\r\n                        element.classList.add('sort-active');\r\n                        // Call the original handler\r\n                        self.libraryCourseHandler.bind(this)(e);\r\n                    });\r\n                });\r\n            }\r\n\r\n            var showcontentHandler = document.querySelectorAll(\".import-course-list-section .import-button\");\r\n            if (showcontentHandler) {\r\n                showcontentHandler.forEach((element) => {\r\n                    element.addEventListener('click', (e) => {\r\n                        str.get_strings([\r\n                            {key: 'showcontents', component: 'format_kickstart'},\r\n                            {key: 'hidecontents', component: 'format_kickstart'}\r\n                        ]).then(function(strings) {\r\n                            if (element.textContent.trim() === strings[0]) {\r\n                                element.textContent = strings[1];\r\n                            } else if (element.textContent.trim() === strings[1]) {\r\n                                element.textContent = strings[0];\r\n                            }\r\n                        });\r\n                    });\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n        var importActivity = document.querySelectorAll(\".import-course-list-section .activity-items .import-activity\");\r\n        if (importActivity) {\r\n            importActivity.forEach((element) => {\r\n                element.addEventListener('click', self.importActivityHandler.bind(this));\r\n            });\r\n        }\r\n\r\n        $('body').delegate(self.fullDescription, \"click\", self.fullmodcontentHandler.bind(this));\r\n        $('body').delegate(self.trimDescription, \"click\", self.trimmodcontentHandler.bind(this));\r\n\r\n    };\r\n\r\n\r\n    Formatkickstart.prototype.confirmbutton = \".buttons .singlebutton form button\";\r\n\r\n    Formatkickstart.prototype.loadiconElement = \"#modal-footer span#load-action\";\r\n\r\n    Formatkickstart.prototype.fullDescription = \".list-library-courses .trim-summary .section-summary-action\";\r\n\r\n    Formatkickstart.prototype.trimDescription = \".list-library-courses .fullcontent-summary .section-summary-action\";\r\n\r\n    Formatkickstart.prototype.contextId = null;\r\n\r\n    Formatkickstart.prototype.courseId = null;\r\n\r\n    Formatkickstart.prototype.menuid = null;\r\n\r\n\r\n    Formatkickstart.prototype.importActivityHandler = function(event) {\r\n        event.preventDefault();\r\n        let self = this;\r\n        var courseid = event.currentTarget.getAttribute('data-course');\r\n        var cmid = event.currentTarget.getAttribute('data-module');\r\n        var maincourse = event.currentTarget.getAttribute('data-maincourse');\r\n        var modname = event.currentTarget.getAttribute('data-modname');\r\n        var args = {\r\n            courseid: courseid,\r\n            cmid: cmid,\r\n            maincourse: maincourse,\r\n            modname: modname,\r\n        };\r\n\r\n        ModalFactory.create({\r\n            type: ModalFactory.types.SAVE_CANCEL,\r\n            title: str.get_string('importactivity', 'format_kickstart'),\r\n            body: Fragment.loadFragment('format_kickstart', 'get_import_module_box', self.contextId, args),\r\n        }).then(function(modal) {\r\n            modal.setButtonText('save', str.get_string('importandview', 'format_kickstart'));\r\n            modal.setButtonText('cancel', str.get_string('importandreturn', 'format_kickstart'));\r\n            // Handle form submission.\r\n            modal.getRoot().on(ModalEvents.save, function(e) {\r\n                var sectionId = $('#import-module-section').val();\r\n                args.sectionid = sectionId;\r\n                args.action = 'view';\r\n                // Perform import.\r\n                self.importCourse(args);\r\n                modal.destroy();\r\n            }.bind(this));\r\n\r\n            modal.getRoot().on(ModalEvents.cancel, function(e) {\r\n                var sectionId = $('#import-module-section').val();\r\n                args.sectionid = sectionId;\r\n                args.action = 'return';\r\n                // Perform import.\r\n                self.importCourse(args);\r\n                modal.destroy();\r\n            }.bind(this));\r\n\r\n            modal.show();\r\n        }.bind(this));\r\n    };\r\n\r\n\r\n    Formatkickstart.prototype.importCourse = function(args) {\r\n        var self = this;\r\n        var promise = Fragment.loadFragment('format_kickstart', 'import_activity_courselib', self.contextId, args);\r\n        promise.then((cmid, js) => {\r\n            if (args.action == 'view') {\r\n                window.location.href = M.cfg.wwwroot + '/mod/' + args.modname + '/view.php?id=' + cmid;\r\n            } else {\r\n                str.get_string('importactivitysuccessfully', 'format_kickstart').then(function(string) {\r\n                    Toast.add(string, {type: 'success'});\r\n                });\r\n            }\r\n        }).catch();\r\n    };\r\n\r\n\r\n    Formatkickstart.prototype.fullmodcontentHandler = function(event) {\r\n        var THIS = $(event.currentTarget);\r\n        let fullContent = $(THIS).closest('.accordion-item').find('.fullcontent-summary');\r\n        let trimcontent = $(THIS).closest('.accordion-item').find('.trim-summary');\r\n        if (trimcontent.hasClass('summary-show')) {\r\n            trimcontent.removeClass('summary-show');\r\n            fullContent.addClass('summary-show');\r\n        }\r\n    };\r\n\r\n    Formatkickstart.prototype.trimmodcontentHandler = function(event) {\r\n        var THIS = $(event.currentTarget);\r\n        let fullContent = $(THIS).closest('.accordion-item').find('.fullcontent-summary');\r\n        let trimcontent = $(THIS).closest('.accordion-item').find('.trim-summary');\r\n        if (fullContent.hasClass('summary-show')) {\r\n            fullContent.removeClass('summary-show');\r\n            trimcontent.addClass('summary-show');\r\n        }\r\n    };\r\n\r\n    Formatkickstart.prototype.libraryCourseHandler = function(event) {\r\n        let sort = event.currentTarget.getAttribute('data-sort');\r\n        let searchcourse = document.querySelector(\"#search-course-library\").value;\r\n        let customfieldsitems = document.querySelectorAll(\".library-customfield-field.librarycourse-filter-item .filter-item\");\r\n        let customvalues = {};\r\n        if (customfieldsitems) {\r\n            customfieldsitems.forEach((element) => {\r\n                customvalues[element.getAttribute(\"data-value\")] = element.value;\r\n            });\r\n        }\r\n        this.getlibarycourse(searchcourse, customvalues, sort);\r\n    };\r\n\r\n\r\n    Formatkickstart.prototype.getlibarycourse = function(searchcourse, customvalues, sort) {\r\n        let courselist = document.querySelector(\".import-course-list-section\");\r\n        if (courselist) {\r\n            let self = this;\r\n            let args = {\r\n                contextid: self.contextId,\r\n                courseid: self.courseId,\r\n                menuid: self.menuid,\r\n                searchcourse: searchcourse,\r\n                customvalues : JSON.stringify(customvalues),\r\n                sort: sort\r\n            };\r\n\r\n            const promise = Fragment.loadFragment(\r\n                'format_kickstart',\r\n                'get_library_courselist',\r\n                self.contextId,\r\n                args\r\n            );\r\n\r\n            promise.then((html, js) => {\r\n                Templates.replaceNode(courselist, html, js);\r\n            }).catch();\r\n        }\r\n    };\r\n\r\n    Formatkickstart.prototype.getKickstartTemplate = function(action, value) {\r\n        let templatelist = document.querySelector(\".template-list\");\r\n        let searchBox = document.querySelector(\".kickstart-page #search-template\");\r\n        let searchvalue = (searchBox != undefined) ? searchBox.value : '';\r\n        if (templatelist) {\r\n            let self = this;\r\n            let args = {\r\n                contextid: self.contextId,\r\n                courseid: self.courseId,\r\n                menuid: self.menuid,\r\n                action: action,\r\n                value: value,\r\n                search: searchvalue,\r\n            };\r\n\r\n            const promise = Fragment.loadFragment(\r\n                'format_kickstart',\r\n                'get_kickstart_templatelist',\r\n                self.contextId,\r\n                args\r\n            );\r\n\r\n            promise.then((html, js) => {\r\n                Templates.replaceNode(templatelist, html, js);\r\n            }).catch();\r\n        }\r\n    };\r\n\r\n    Formatkickstart.prototype.templateSearchHandler = function(event) {\r\n        let value = event.currentTarget.value;\r\n        this.getKickstartTemplate('searchtemplate', value);\r\n    };\r\n\r\n    Formatkickstart.prototype.templateviewHandler = function(event) {\r\n        let value = event.currentTarget.getAttribute(\"data-value\");\r\n        const tileView = document.getElementById('tile-view');\r\n        const listView = document.getElementById('list-view');\r\n\r\n        if (value === 'tile') {\r\n            tileView.classList.add('active');\r\n            listView.classList.remove('active');\r\n        } else {\r\n            listView.classList.add('active');\r\n            tileView.classList.remove('active');\r\n        }\r\n        this.getKickstartTemplate('changetemplate', value);\r\n    };\r\n\r\n    Formatkickstart.prototype.templateHandler = function(event) {\r\n        var self = this;\r\n        event.preventDefault();\r\n        let templateName = event.target.getAttribute(\"data-templatename\");\r\n        let templateId = event.target.getAttribute(\"data-template\");\r\n        self.confirmImportTemplate(templateId, templateName);\r\n    };\r\n\r\n    Formatkickstart.prototype.confirmImportTemplate = function(templateId, templateName) {\r\n        let self = this;\r\n        var plugindata = {\r\n            name: templateName\r\n        };\r\n        str.get_strings([\r\n            {key: 'confirm', component: 'core'},\r\n            {key: 'confirmtemplate', param: plugindata, component: 'format_kickstart'},\r\n            {key: 'import'},\r\n            {key: 'no'}\r\n        ]).done(function(s) {\r\n                notification.confirm(s[0], s[1], s[2], s[3], function() {\r\n                    document.querySelectorAll(\"body\")[0].classList.add(\"kickstart-icon\");\r\n                    Ajax.call([{\r\n                        methodname: 'format_kickstart_import_template',\r\n                        args: {templateid: templateId, courseid: self.courseId},\r\n                        done: function(response) {\r\n                            if (response) {\r\n                                let redirect = Config.wwwroot + \"/course/view.php?id=\" + self.courseId;\r\n                                window.location.assign(redirect);\r\n                            }\r\n                        }\r\n                    }]);\r\n                });\r\n            }\r\n        );\r\n    };\r\n\r\n    const moveOutMoreMenu = (navMenu) => {\r\n\r\n        if (navMenu === null) {\r\n            return;\r\n        }\r\n\r\n        var menu = navMenu.querySelector('a.kickstart-nav');\r\n\r\n        if (menu === null) {\r\n            return;\r\n        }\r\n\r\n        menu = menu.parentNode;\r\n        menu.dataset.forceintomoremenu = false;\r\n        menu.querySelector('a').classList.remove('dropdown-item');\r\n        menu.querySelector('a').classList.add('nav-link');\r\n        menu.parentNode.removeChild(menu);\r\n\r\n        var moreMenu = navMenu.querySelector('li.dropdownmoremenu a.dropdown-toggle');\r\n        if (moreMenu) {\r\n            moreMenu.classList.remove('active');\r\n        }\r\n\r\n        // Insert the stored menus before the more menu.\r\n        navMenu.insertBefore(menu, navMenu.children[1]);\r\n        window.dispatchEvent(new Event('resize')); // Dispatch the resize event to create more menu.\r\n    };\r\n\r\n    return {\r\n        init: function(contextid, courseid, menuid, filteroptions) {\r\n            return new Formatkickstart(contextid, courseid, menuid, filteroptions);\r\n        },\r\n\r\n        instanceMenuLink: function () {\r\n            var primaryNav = document.querySelector('.secondary-navigation ul.more-nav');\r\n            moveOutMoreMenu(primaryNav);\r\n        },\r\n    };\r\n});"],"names":["define","$","str","notification","Config","Ajax","Fragment","Templates","ModalEvents","ModalFactory","Toast","Formatkickstart","contextid","courseid","menuid","filteroptions","self","this","useTemplate","document","querySelectorAll","contextId","courseId","forEach","element","addEventListener","templateHandler","bind","templateview","templateviewHandler","templatesearch","templateSearchHandler","librarycourse","libraryCourseHandler","librarysort","e","link","classList","remove","add","showcontentHandler","get_strings","key","component","then","strings","textContent","trim","importActivity","importActivityHandler","delegate","fullDescription","fullmodcontentHandler","trimDescription","trimmodcontentHandler","prototype","confirmbutton","loadiconElement","event","preventDefault","args","currentTarget","getAttribute","cmid","maincourse","modname","create","type","types","SAVE_CANCEL","title","get_string","body","loadFragment","modal","setButtonText","getRoot","on","save","sectionId","val","sectionid","action","importCourse","destroy","cancel","show","js","window","location","href","M","cfg","wwwroot","string","catch","THIS","fullContent","closest","find","trimcontent","hasClass","removeClass","addClass","sort","searchcourse","querySelector","value","customfieldsitems","customvalues","getlibarycourse","courselist","JSON","stringify","html","replaceNode","getKickstartTemplate","templatelist","searchBox","searchvalue","undefined","search","tileView","getElementById","listView","templateName","target","templateId","confirmImportTemplate","plugindata","name","param","done","s","confirm","call","methodname","templateid","response","redirect","assign","init","instanceMenuLink","navMenu","menu","parentNode","dataset","forceintomoremenu","removeChild","moreMenu","insertBefore","children","dispatchEvent","Event","moveOutMoreMenu"],"mappings":"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"}